<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Boosted trees via Spark — details_boost_tree_spark • parsnip</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../tidymodels.css" rel="stylesheet">




<meta property="og:title" content="Boosted trees via Spark — details_boost_tree_spark" />
<meta property="og:description" content="sparklyr::ml_gradient_boosted_trees() creates a series of decision trees
forming an ensemble. Each tree depends on the results of previous trees.
All trees in the ensemble are combined to produce a final prediction." />
<meta property="og:image" content="https://parsnip.tidymodels.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">parsnip</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://tidymodels.org">tidymodels</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.7.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/parsnip_Intro.html">Basic Usage</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://www.tidymodels.org/learn/models/parsnip-ranger-glmnet/">Regression modeling</a>
    </li>
    <li>
      <a href="https://www.tidymodels.org/learn/models/parsnip-nnet/">Classification modeling</a>
    </li>
    <li>
      <a href="https://www.tidymodels.org/learn/develop/models/">Making a parsnip model from scratch</a>
    </li>
    <li>
      <a href="../articles/articles/Submodels.html">Evaluating submodels with the same model object</a>
    </li>
    <li>
      <a href="../articles/articles/Examples.html">Fitting and Predicting with parsnip</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/parsnip/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Boosted trees via Spark</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidymodels/parsnip/blob/master/R/boost_tree_spark.R'><code>R/boost_tree_spark.R</code></a></small>
    <div class="hidden name"><code>details_boost_tree_spark.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code><a href='https://rdrr.io/pkg/sparklyr/man/ml_gradient_boosted_trees.html'>sparklyr::ml_gradient_boosted_trees()</a></code> creates a series of decision trees
forming an ensemble. Each tree depends on the results of previous trees.
All trees in the ensemble are combined to produce a final prediction.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For this engine, there are multiple modes: classification and
regression. However, multiclass classification is not supported yet.</p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Tuning Parameters</h3>


<p>This model has 7 tuning parameters:</p><ul>
<li><p><code>tree_depth</code>: Tree Depth (type: integer, default: 5L)</p></li>
<li><p><code>trees</code>: # Trees (type: integer, default: 20L)</p></li>
<li><p><code>learn_rate</code>: Learning Rate (type: double, default: 0.1)</p></li>
<li><p><code>mtry</code>: # Randomly Selected Predictors (type: integer, default: see
below)</p></li>
<li><p><code>min_n</code>: Minimal Node Size (type: integer, default: 1L)</p></li>
<li><p><code>loss_reduction</code>: Minimum Loss Reduction (type: double, default:
0.0)</p></li>
<li><p><code>sample_size</code>: # Observations Sampled (type: integer, default: 1.0)</p></li>
</ul>

<p>The <code>mtry</code> parameter is related to the number of predictors. The default
depends on the model mode. For classification, the square root of the
number of predictors is used and for regression, one third of the
predictors are sampled.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Translation from parsnip to the original package (regression)</h3>
<p><div class="sourceCode r"></p><pre><span class='fu'><a href='boost_tree.html'>boost_tree</a></span><span class='op'>(</span>
  mtry <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>, trees <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>, min_n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>, tree_depth <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>,
  learn_rate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>, loss_reduction <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>, sample_size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='set_engine.html'>set_engine</a></span><span class='op'>(</span><span class='st'>"spark"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='set_args.html'>set_mode</a></span><span class='op'>(</span><span class='st'>"regression"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='translate.html'>translate</a></span><span class='op'>(</span><span class='op'>)</span>
</pre><p></div></p><pre><span class='co'>## Boosted Tree Model Specification (regression)</span>
<span class='co'>## </span>
<span class='co'>## Main Arguments:</span>
<span class='co'>##   mtry = integer()</span>
<span class='co'>##   trees = integer()</span>
<span class='co'>##   min_n = integer()</span>
<span class='co'>##   tree_depth = integer()</span>
<span class='co'>##   learn_rate = numeric()</span>
<span class='co'>##   loss_reduction = numeric()</span>
<span class='co'>##   sample_size = numeric()</span>
<span class='co'>## </span>
<span class='co'>## Computational engine: spark </span>
<span class='co'>## </span>
<span class='co'>## Model fit template:</span>
<span class='co'>## sparklyr::ml_gradient_boosted_trees(x = missing_arg(), formula = missing_arg(), </span>
<span class='co'>##     type = "regression", feature_subset_strategy = integer(), </span>
<span class='co'>##     max_iter = integer(), min_instances_per_node = min_rows(integer(0), </span>
<span class='co'>##         x), max_depth = integer(), step_size = numeric(), min_info_gain = numeric(), </span>
<span class='co'>##     subsampling_rate = numeric(), seed = sample.int(10^5, 1))</span>
</pre>


<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Translation from parsnip to the original package (classification)</h3>
<p><div class="sourceCode r"></p><pre><span class='fu'><a href='boost_tree.html'>boost_tree</a></span><span class='op'>(</span>
  mtry <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>, trees <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>, min_n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>, tree_depth <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>integer</a></span><span class='op'>(</span><span class='op'>)</span>,
  learn_rate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>, loss_reduction <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>, sample_size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='set_engine.html'>set_engine</a></span><span class='op'>(</span><span class='st'>"spark"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='set_args.html'>set_mode</a></span><span class='op'>(</span><span class='st'>"classification"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='translate.html'>translate</a></span><span class='op'>(</span><span class='op'>)</span>
</pre><p></div></p><pre><span class='co'>## Boosted Tree Model Specification (classification)</span>
<span class='co'>## </span>
<span class='co'>## Main Arguments:</span>
<span class='co'>##   mtry = integer()</span>
<span class='co'>##   trees = integer()</span>
<span class='co'>##   min_n = integer()</span>
<span class='co'>##   tree_depth = integer()</span>
<span class='co'>##   learn_rate = numeric()</span>
<span class='co'>##   loss_reduction = numeric()</span>
<span class='co'>##   sample_size = numeric()</span>
<span class='co'>## </span>
<span class='co'>## Computational engine: spark </span>
<span class='co'>## </span>
<span class='co'>## Model fit template:</span>
<span class='co'>## sparklyr::ml_gradient_boosted_trees(x = missing_arg(), formula = missing_arg(), </span>
<span class='co'>##     type = "classification", feature_subset_strategy = integer(), </span>
<span class='co'>##     max_iter = integer(), min_instances_per_node = min_rows(integer(0), </span>
<span class='co'>##         x), max_depth = integer(), step_size = numeric(), min_info_gain = numeric(), </span>
<span class='co'>##     subsampling_rate = numeric(), seed = sample.int(10^5, 1))</span>
</pre>


<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Preprocessing requirements</h3>


<p>This engine does not require any special encoding of the predictors.
Categorical predictors can be partitioned into groups of factor levels
(e.g. <code>{a, c}</code> vs <code>{b, d}</code>) when splitting at a node. Dummy variables
are not required for this model.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Other details</h3>


<p>For models created using the <code>"spark"</code> engine, there are several things
to consider.</p><ul>
<li><p>Only the formula interface to via <code><a href='https://generics.r-lib.org/reference/fit.html'>fit()</a></code> is available; using
<code><a href='https://generics.r-lib.org/reference/fit_xy.html'>fit_xy()</a></code> will generate an error.</p></li>
<li><p>The predictions will always be in a Spark table format. The names
will be the same as documented but without the dots.</p></li>
<li><p>There is no equivalent to factor columns in Spark tables so class
predictions are returned as character columns.</p></li>
<li><p>To retain the model object for a new R session (via <code><a href='https://rdrr.io/r/base/save.html'>save()</a></code>), the
<code>model$fit</code> element of the parsnip object should be serialized via
<code>ml_save(object$fit)</code> and separately saved to disk. In a new
session, the object can be reloaded and reattached to the parsnip
object.</p></li>
</ul>


<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>References</h3>

<ul>
<li><p>Luraschi, J, K Kuo, and E Ruiz. 2019. <em>Mastering Spark with R</em>.
O’Reilly Media</p></li>
<li><p>Kuhn, M, and K Johnson. 2013. <em>Applied Predictive Modeling</em>.
Springer.</p></li>
</ul>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>parsnip is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Max Kuhn, Davis Vaughan.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


