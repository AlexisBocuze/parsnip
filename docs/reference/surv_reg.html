<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>General Interface for Parametric Survival Models — surv_reg • parsnip</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="General Interface for Parametric Survival Models — surv_reg" />

<meta property="og:description" content="surv_reg is a way to generate a specification of a model
before fitting and allows the model to be created using
R. The main argument for the
model is:
dist: The probability distribution of the outcome.
This argument is converted to its specific names at the
time that the model is fit. Other options and argument can be
set using the others argument. If left to its default
here (NULL), the value is taken from the underlying model
functions.
If parameters need to be modified, this function can be used
in lieu of recreating the object from scratch." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">parsnip</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/parsnip_Intro.html">Basic Usage</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>General Interface for Parametric Survival Models</h1>
    
    <div class="hidden name"><code>surv_reg.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>surv_reg</code> is a way to generate a <em>specification</em> of a model
before fitting and allows the model to be created using
R. The main argument for the
model is:</p><ul>
<li><p><code>dist</code>: The probability distribution of the outcome.</p></li>
</ul><p>This argument is converted to its specific names at the
time that the model is fit. Other options and argument can be
set using the <code>others</code> argument. If left to its default
here (<code>NULL</code>), the value is taken from the underlying model
functions.</p>
<p>If parameters need to be modified, this function can be used
in lieu of recreating the object from scratch.</p>
    
    </div>

    <pre class="usage"><span class='fu'>surv_reg</span>(<span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"regression"</span>, <span class='kw'>dist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>others</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='no'>...</span>)

<span class='co'># S3 method for surv_reg</span>
<span class='fu'>update</span>(<span class='no'>object</span>, <span class='kw'>dist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>others</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>fresh</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mode</th>
      <td><p>A single character string for the type of model.
The only possible value for this model is "regression".</p></td>
    </tr>
    <tr>
      <th>dist</th>
      <td><p>A character string for the outcome distribution. "weibull" is
the default.</p></td>
    </tr>
    <tr>
      <th>others</th>
      <td><p>A named list of arguments to be used by the
underlying models (e.g., <code><a href='http://www.rdocumentation.org/packages/flexsurv/topics/flexsurvreg'>flexsurv::flexsurvreg</a></code>). These are not evaluated
until the model is fit and will be substituted into the model
fit expression.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Used for S3 method consistency. Any arguments passed to
the ellipses will result in an error. Use <code>others</code> instead.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>A survival regression model specification.</p></td>
    </tr>
    <tr>
      <th>fresh</th>
      <td><p>A logical for whether the arguments should be
modified in-place of or replaced wholesale.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An updated model specification.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The data given to the function are not saved and are only used
to determine the <em>mode</em> of the model. For <code>surv_reg</code>,the
mode will always be "regression".</p>
<p>Since survival models typically involve censoring (and require the use of
<code><a href='http://www.rdocumentation.org/packages/survival/topics/Surv'>survival::Surv()</a></code> objects), the <code><a href='fit.html'>fit()</a></code> function will require that the
survival model be specified via the formula or recipes interfaces.</p>
<p>For recipes, right censoring indicators should be specified
using the "censoring var" role (see examples below). Also, for
the engine that uses <code>flexsurv::flexsurvfit</code>, extra roles can
be used for non-location parameters (e.g. <code>sigma</code> or <code>sdlog</code>) so
that other distributional parameters can be functions or
covariates. See the example below as well as Jackson (2016).</p>
<p>Also, for the <code>flexsurv::flexsurvfit</code> engine, the typical
<code>strata</code> function cannot be used. To achieve the same effect,
the extra parameter roles can be used (as described above).</p>
<p>The model can be created using the <code><a href='fit.html'>fit()</a></code> function using the
following <em>engines</em>:</p><ul>
<li><p><span class="pkg">R</span>:  <code>"flexsurv"</code></p></li>
</ul>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jackson, C. (2016). <code>flexsurv</code>: A Platform for Parametric Survival
Modeling in R. <em>Journal of Statistical Software</em>, 70(8), 1 - 33.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='varying.html'>varying()</a></code>, <code><a href='fit.html'>fit()</a></code>, <code><a href='http://www.rdocumentation.org/packages/survival/topics/Surv'>survival::Surv()</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>surv_reg</span>()</div><div class='output co'>#&gt; Parametric Survival Regression Model Specification (regression)
#&gt; </div><div class='input'><span class='co'># Parameters can be represented by a placeholder:</span>
<span class='fu'>surv_reg</span>(<span class='kw'>dist</span> <span class='kw'>=</span> <span class='fu'><a href='varying.html'>varying</a></span>())</div><div class='output co'>#&gt; Parametric Survival Regression Model Specification (regression)
#&gt; 
#&gt; Main Arguments:
#&gt;   dist = varying()
#&gt; </div><div class='input'>
<span class='co'># Examples of using recipes with the `fit` function</span>

<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>recipes</span>)
<span class='fu'>library</span>(<span class='no'>survival</span>)
<span class='fu'>data</span>(<span class='no'>lung</span>)

<span class='no'>surv_rec</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/recipes/topics/recipe'>recipe</a></span>(<span class='no'>time</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>lung</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/recipes/topics/add_role'>add_role</a></span>(<span class='no'>status</span>, <span class='kw'>new_role</span> <span class='kw'>=</span> <span class='st'>"censoring var"</span>) <span class='kw'>%&gt;%</span>
  <span class='co'># exclude some vars from being in the model</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/recipes/topics/add_role'>add_role</a></span>(<span class='no'>inst</span>, <span class='no'>sex</span>, <span class='no'>ph.karno</span>, <span class='no'>pat.karno</span>, <span class='no'>meal.cal</span>, <span class='no'>wt.loss</span>,
           <span class='kw'>new_role</span> <span class='kw'>=</span> <span class='st'>"other variables"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Changing role(s) for status</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Changing role(s) for inst, sex, ph.karno, pat.karno, meal.cal, wt.loss</span></div><div class='input'>
<span class='no'>log_normal_mod</span> <span class='kw'>&lt;-</span> <span class='fu'>surv_reg</span>(<span class='kw'>dist</span> <span class='kw'>=</span> <span class='st'>"lnorm"</span>)

<span class='fu'><a href='fit.html'>fit</a></span>(<span class='no'>log_normal_mod</span>, <span class='kw'>recipe</span> <span class='kw'>=</span> <span class='no'>surv_rec</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>lung</span>, <span class='kw'>engine</span> <span class='kw'>=</span> <span class='st'>"flexsurv"</span>)</div><div class='output co'>#&gt; Call:
#&gt; flexsurv::flexsurvreg(formula = Surv(time, status) ~ age + ph.ecog, 
#&gt;     data = data, dist = "lnorm")
#&gt; 
#&gt; Estimates: 
#&gt;          data mean  est       L95%      U95%      se        exp(est)  L95%    
#&gt; meanlog        NA    7.41390   6.37130   8.45651   0.53195        NA        NA
#&gt; sdlog          NA    1.05052   0.94101   1.17278   0.05901        NA        NA
#&gt; age      62.45815   -0.02253  -0.03906  -0.00599   0.00844   0.97772   0.96169
#&gt; ph.ecog   0.95154   -0.34580  -0.55109  -0.14051   0.10474   0.70765   0.57632
#&gt;          U95%    
#&gt; meanlog        NA
#&gt; sdlog          NA
#&gt; age       0.99403
#&gt; ph.ecog   0.86891
#&gt; 
#&gt; N = 227,  Events: 164,  Censored: 63
#&gt; Total time at risk: 69522
#&gt; Log-likelihood = -1152.728, df = 4
#&gt; AIC = 2313.455
#&gt; </div><div class='input'>
<span class='co'># make the normal variance be a function of gender:</span>

<span class='no'>strata_model</span> <span class='kw'>&lt;-</span> <span class='no'>surv_rec</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/recipes/topics/add_role'>add_role</a></span>(<span class='no'>sex</span>, <span class='kw'>new_role</span> <span class='kw'>=</span> <span class='st'>"sdlog"</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Changing role(s) for sex</span></div><div class='input'>
<span class='fu'><a href='fit.html'>fit</a></span>(<span class='no'>log_normal_mod</span>, <span class='kw'>recipe</span> <span class='kw'>=</span> <span class='no'>strata_model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>lung</span>, <span class='kw'>engine</span> <span class='kw'>=</span> <span class='st'>"flexsurv"</span>)</div><div class='output co'>#&gt; Call:
#&gt; flexsurv::flexsurvreg(formula = Surv(time, status) ~ age + ph.ecog + 
#&gt;     sdlog(sex), data = data, dist = "lnorm")
#&gt; 
#&gt; Estimates: 
#&gt;             data mean  est       L95%      U95%      se        exp(est)
#&gt; meanlog           NA    7.35177   6.29235   8.41119   0.54053        NA
#&gt; sdlog             NA    1.15480   0.81414   1.63800   0.20595        NA
#&gt; age         62.45815   -0.02144  -0.03837  -0.00452   0.00863   0.97878
#&gt; ph.ecog      0.95154   -0.33938  -0.54554  -0.13322   0.10519   0.71221
#&gt; sdlog(sex)   1.39648   -0.07113  -0.31799   0.17572   0.12595   0.93134
#&gt;             L95%      U95%    
#&gt; meanlog           NA        NA
#&gt; sdlog             NA        NA
#&gt; age          0.96236   0.99549
#&gt; ph.ecog      0.57953   0.87527
#&gt; sdlog(sex)   0.72761   1.19210
#&gt; 
#&gt; N = 227,  Events: 164,  Censored: 63
#&gt; Total time at risk: 69522
#&gt; Log-likelihood = -1152.571, df = 5
#&gt; AIC = 2315.142
#&gt; </div><div class='input'>
<span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='fu'>surv_reg</span>(<span class='kw'>dist</span> <span class='kw'>=</span> <span class='st'>"weibull"</span>)
<span class='no'>model</span></div><div class='output co'>#&gt; Parametric Survival Regression Model Specification (regression)
#&gt; 
#&gt; Main Arguments:
#&gt;   dist = weibull
#&gt; </div><div class='input'><span class='fu'>update</span>(<span class='no'>model</span>, <span class='kw'>dist</span> <span class='kw'>=</span> <span class='st'>"lnorm"</span>)</div><div class='output co'>#&gt; Parametric Survival Regression Model Specification (regression)
#&gt; 
#&gt; Main Arguments:
#&gt;   dist = lnorm
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

